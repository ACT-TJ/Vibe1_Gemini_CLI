# 0007: 비즈니스 로직 추상화 (MCP 모듈 도입)

* **상태:** 채택됨
* **날짜:** 2025-09-23

## 컨텍스트

초기 버전에서는 팀원의 업무량(Workload)을 관리자가 직접 수동으로 입력해야 했습니다. 이는 비현실적이며, 데이터의 일관성을 해칠 수 있는 방식이었습니다.

## 결정

1.  핵심 비즈니스 로직을 별도의 모듈로 추상화하기로 결정하고, `src/lib/mcp.js` 파일을 생성했습니다.
2.  첫 기능으로, **팀원의 업무량을 자동으로 계산**하는 `calculateTeamWorkload` 함수를 구현했습니다.
3.  업무량 계산 규칙은 "**한 팀원에게 할당된 'In Progress' 상태의 Task 수**"를 기반으로 합니다. (1개=50%, 2개=90%, 3개 이상=100%)
4.  서버 API(`POST /api/data`)는 이제 데이터를 저장하기 직전에 항상 이 MCP 모듈을 호출하여, Task 할당 상태가 변경될 때마다 업무량이 자동으로 재계산되도록 했습니다.
5.  Admin UI에서 업무량 수동 입력 필드를 제거하고, 계산된 값을 읽기 전용으로 표시하도록 변경했습니다.

## 결과

*   업무량 데이터가 더 이상 주관적인 입력이 아닌, 실제 할당된 작업을 기반으로 한 객관적인 데이터가 되었습니다.
*   핵심 비즈니스 로직이 API 핸들러나 프론트엔드 코드에서 분리되어, 향후 '작업 완료 확률 시뮬레이션' 등 더 복잡한 규칙을 추가하기 용이한 구조가 되었습니다.
*   'MCP 모듈'이라는 이름의 실체가 생겨, 프로젝트의 정체성을 구체화하는 계기가 되었습니다.
